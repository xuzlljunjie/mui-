<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>我的积分</title>
				<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="icon" href="images/pand/pand.icon" type="image/x-icon" />
		<!--标准mui.css-->
		<link href="../../../css/mui.min.css" rel="stylesheet" />
		<link href="../../../css/mui.picker.min.css" rel="stylesheet" />
		<link href="css/mui.poppicker.css" rel="stylesheet">
	
	</head>
	<style>
			header img{
				width: 9px;
				height: 18px;
				margin-top: 12px;
			}
			.myintegral{
			  width: 100%;
				height: 158px;
			}
			.myintegralimg{
			  width: 100%;
				height: 158px;
			}
		    .integraltopimg{
		    	width: 15px;
		    	height: 17px;
		    	position: absolute;
		    	left: 136px;
		    	top: 117px;
		    }
		    .integraltopspan{
		    	font-size: 40px;
		    	color: #ffffff;
		    	text-align: center;
		    	line-height: 158px;
		    	position: absolute;
		    	top: 45px;
		    	left: 159px;
		    }
		    .integraltopa{
		    	font-size: 12px;
		    	color: #ffffff;
		    	position: absolute;
		    	left: 305px;
		    	top:67px;
		    }
		    #jifenmingxispan{
		    	font-size: 18px;
		    	color: #333333;
		    	padding-top: 25px;
		    	padding-left: 15px;
		    }
		    #mui-content{
		    	background-color: #ffffff;
		    }
		    /*#mui-control-item{
		    	color: #FF5849;
		    	border-bottom:2px solid #FF5849;
		    }*/
		   	.collectimg{
				width: 80px;
				height: 70px;
				float: left;
			
			}
			.collectimg img{
				width: 80px;
				height: 70px;
				
			}
		   	.collectr{
				float: right;
			}
			.mui-test{
				font-size: 14px;
				color: #333333;
				margin-left: 12px;
				
			}
			.mui-xing{
				margin-left: 12px;
				width: 90px;
				float: left;
			}
			.mui-xing span{
				color: #FF413A;
			  width: 10px;
			  height: 10px;
			  margin-left: 2px;
			}
			.mui-xing-fen{
				font-size: 10px;
				color: #666666;
				float: left;
				margin-top: 3px;
			}
			.mui-time{
				font-size: 10px;
				color: #666666;
				float: left;
				margin-top: 3px;
				margin-left: 12px;
			}
			.mui-km{
				font-size: 10px;
				color: #666666;
				float: left;
				margin-top: 3px;
				margin-left: 12px;
			}
			.mui-collectb{
				height: 20px;
				margin-top: 30px;
				margin-left: 12px;
			}
			.mui-qian{
				font-size: 18px;
				color: #FF413A;
			}
			.mui-qian-icon{
				font-size: 10px;
				color: #FF413A;
			}
			.mui-collectnuber{
				font-size: 10px;
				color: #999999;
			}
	</style>
	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-icon mui-icon-left-nav mui-pull-left mui-action-back"></a>
			<h1 class="mui-title">我的积分</h1>
		</header>
		<div id="mui-content" class="mui-content">
			<div class="myintegral">
				<img class="myintegralimg" src="../../../images/pand/integral.png"/>
				<div >
					<img class="integraltopimg" src="../../../images/pand/box.png"/>
				    <span class="integraltopspan">111819</span>
				</div>
				<a class="integraltopa">积分规则</a>
			</div>
			<div>
				<span id="jifenmingxispan" >积分明细</span>
			</div>
				
		
		<div class="blueHeaderBg"></div> 
		<div id="" class=""> 
			<div id="sliderSegmentedControl" class="mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
				<div class="titleList"> 
					
					<a id="mui-control-item" class="mui-control-item paddingNone" href="#item1mobile" data-id="0" >全部</a> 
					<a id="mui-control-item" class="mui-control-item paddingNone" href="#item2mobile" data-id="1" >收入</a> 
					<a id="mui-control-item" class="mui-control-item paddingNone" href="#item3mobile" data-id="2">支出 </a>
					<input type="hidden" id="status" value="0"> 
				</div> 
			</div> <div class="mui-slider-group">
				 
					
				<!--待审核--> 
				<div id="item1mobile" class="mui-slider-item mui-control-content"> 
					<div class="mui-scroll-wrapper"> 
						<div class="mui-scroll"> 
							
						</div> 
					</div> 
				</div> 
					
				<!--派单中--> 
				<div id="item2mobile" class="mui-slider-item mui-control-content">
					<div class="mui-scroll-wrapper">
						<div class="mui-scroll">
							
						</div>
					</div> 
				</div>
				<!--已完成--> 
				<div id="item3mobile" class="mui-slider-item mui-control-content"> 
					<div class="mui-scroll-wrapper"> 
						<div class="mui-scroll"> 
							<div class="mui-table-cell">
		<div class="collectimg">
					<img src="../../../images/pand/tou.png" />
		</div>
							<div class="collectr">
			<p class="mui-test">马桶维修  水路管路安装改造更新工程</p>
			<div class="mui-xing">
			<span class="mui-icon mui-icon-starhalf"></span>
			<span class="mui-icon mui-icon-star"></span>
			<span class="mui-icon mui-icon-star"></span>
			<span class="mui-icon mui-icon-star"></span>
			<span class="mui-icon mui-icon-star"></span>
			</div>
			<p class="mui-xing-fen">0.5</p>
			<p class="mui-time">15分钟</p>
			<p class="mui-km">25km</p>
			<div class="mui-collectb">
				<span class="mui-qian"><span class="mui-qian-icon">￥</span>60</span>
				<span class="mui-collectnuber">1035人收藏</span>
			</div>
		</div>
		<div>
						</div> 
					</div> 
				</div> 
			</div>
		</div>

		</div>
	
	</body>
			<script type="text/javascript" src="../../../js/mui.min.js"></script>
		<script type="text/javascript" src="../../../js/jquery.min.js"></script>
		<script type="text/javascript" src="../../../js/mui.picker.min.js"></script>
		<script type="text/javascript" src="../../../js/mui.poppicker.js"></script>
		<script type="text/javascript" src="../../../js/city.data.js"></script>
		<script>
			(function ($) { 
				//阻尼系数
				var deceleration = mui.os.ios ? 0.003 : 0.0009; 
				$('.mui-scroll-wrapper').scroll({
					bounce: false, indicators: true, 
					//是否显示滚动条
					deceleration: deceleration });
					//因为是四个不同的区块，每一个页数不一样，所以要存不同的页数
					var pageNum=null;
					var pageNum1=1; 
					var pageNum2=1; 
					var pageNum3=1;
					var pageNum4=1;
					$.ready(function () { 
						//循环初始化所有下拉刷新，上拉加载。
						$.each(document.querySelectorAll('.mui-slider-group .mui-scroll'),
						function (index, pullRefreshEl) {
							$(pullRefreshEl).pullToRefresh({
								up: { auto: true, 
									//自动执行一次上拉加载，可选；
									show: false, 
									//显示底部上拉加载提示信息，可选；
									contentrefresh: '正在加载...',
									//上拉进行中提示信息
									contentnomore: '没有更多数据了',
									//上拉无更多信息时提示信息
									callback:function () {
										var self = this;
										setTimeout(function () {
											//获取四个不同的区块显示的位置 
											var ul = self.element.querySelector('.mui-table-view');
											if(index == 0){
												//全部选项卡的index是0，当显示它的时候，滑动页面加1，调数据，以下以此类推 
												pageNum=pageNum1++; createFragment(ul, index,self,pageNum); 
											}else if(index == 1){
												pageNum=pageNum2++; 
												createFragment(ul, index,self,pageNum);
											}else if(index == 2){
												pageNum=pageNum3++; 
												createFragment(ul, index,self,pageNum);
											}else if(index == 3){
												pageNum=pageNum4++; 
												createFragment(ul, index,self,pageNum); 
											} },100);
									}
									} 
							});
						}); 
					});
			})(mui); 
			function createFragment(ul, index,self,pageNum) {
				var fragment = document.createDocumentFragment();
				var li; li = document.createElement('li');
				// li.className = 'mui-table-view-cell';
				var status=null;
				//这是传给后台参数状态 
				if(index == 0){ 
					status=0;;
					//为0的时候是全部 
					}else if(index == 1){
						status=1;
						//为1的时候是待审核
						}else if(index == 2){
							status=2;
							//为2的时候是派单中
							}else if(index == 3){ 
								status=3;
								//为3的时候是已完成 
								} var page_size = 10;
								//传给后台的参数，想要几条数据 
								var data = { page:pageNum,
									//页数
									page_size:page_size,
									//想要几条数据
									status: status,
									//状态 
									}; 
									//请求后台数据
									$.getJSON('order/list', data, function (info) { 
										var str='';
										var datas = info.data;
										if(datas.length == 0){
											//当datas.length为0时，表示没有数据了
											self.endPullUpToRefresh(true);
											//当为true时，底部出现没有更多数据，并且不能滑动 
											}else{ 
												for (var i = 0; i < datas.length; i++)
												{ cold = datas[i]; 
													str+='<div class="mui-card listOrder">'
													+'<div class="mui-card-header">'
													+'<a class="orderNumber">订单号：'
													+cold['order_no']+'</a>'
													+'<a class="orderType">'
													+cold['status']+'</a>' 
													+'</div>' 
													+'<div class="mui-card-content">' 
													+'<ul class="contractUl">'
													+'<li>始发地：山东省莱芜市邻水县</li>'
													+'<li>收货地：山东省莱芜市邻水县</li>'
													+'<li>期望费用：'
													+cold['expected_cost']+'</li>'
													+'<li>收货人：'+cold['end_linkman']+'</li>' 
													+'<li>货物名称：'+cold['goods_name']+'</li>'
													+'<li><span>手机号：'+cold['end_mobile']
													+'</span><span class="contractsR">温度要求：'
													+cold['temperature_requirement']+'</span>' 
													+'</li></ul></div>' +'<div class="mui-card-footer">'
													+'<a class="mui-card-link"></a>' 
													+'<a class=" btnStyle" href="myOrderInfo.html">查看详情</a>' 
													+'</div></div>';
													li.innerHTML=str; fragment.appendChild(li); 
												} ul.appendChild(fragment);
												//注意一定要插入使用appendChild，不是替换里面的数据用innerHTML,否则会出现没有文字提醒以及会出现很大的空白区 
												self.endPullUpToRefresh();
												//当为false或空时，底部出现正在加载，滑动到下一页 
												} 
									});
			};

		</script>
</html>
